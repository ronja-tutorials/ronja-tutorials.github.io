<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- Non social metatags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#157878">

    

    <title>White Noise</title>

    
      <!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">












<!-- Place this data between the <head> tags of your website -->

  <meta name="author" content="Ronja Böhringer">

<meta name="description" content="Summary For many effects we want random numbers to generate patterns or other things in our shaders. Directly using those random values generates a p..." />





<!-- Schema.org markup for Google+ -->
<meta itemprop="name" content="White Noise">
<meta itemprop="description" content="Summary For many effects we want random numbers to generate patterns or other things in our shaders. Directly using those random values generates a p...">

  <meta itemprop="image" content="https://www.ronja-tutorials.com/assets/images/posts/024/Result.png">


<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">



<meta name="twitter:title" content="White Noise">
<meta name="twitter:description" content="Summary For many effects we want random numbers to generate patterns or other things in our shaders. Directly using those random values generates a p...">


  <meta name="twitter:creator" content="@TotallyRonja">


<!-- Twitter summary card with large image must be at least 280x150px -->

  <meta name="twitter:image:src" content="https://www.ronja-tutorials.com/assets/images/posts/024/Result.png">
  <meta property="twitter:image" content="https://www.ronja-tutorials.com/assets/images/posts/024/Result.png">

<meta property="twitter:url" content="https://www.ronja-tutorials.com/2018/09/02/white-noise.html">

<!-- Open Graph data -->
<meta property="og:title" content="White Noise" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ronja-tutorials.com/2018/09/02/white-noise.html" />

  <meta property="og:image" content="https://www.ronja-tutorials.com/assets/images/posts/024/Result.png" />

<meta property="og:description" content="Summary For many effects we want random numbers to generate patterns or other things in our shaders. Directly using those random values generates a p..." />
<meta property="og:site_name" content="Ronja's Shader Tutorials" />

  <meta property="article:published_time" content="2018-09-02T00:00:00+02:00" />














  





  




    

    <link rel="canonical" href="https://www.ronja-tutorials.com/2018/09/02/white-noise.html">

    

    <!-- <link rel="shortcut icon" href="https://www.ronja-tutorials.com/favicon.ico"> -->
    <meta name="robots" content="noarchive">

    <!-- <link rel="alternate" media="only screen and (max-width: 640px)" href="">
    <link rel="alternate" media="handheld" href=""> -->


    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script async defer data-website-id="fb34d410-ef67-4a3a-8fdc-01a05f5e22b2" src="https://stats.ruby0x1.ca/umami.js" ></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="/">Ronja&#39;s Shader Tutorials</a>
    
    <!-- SVG icons from https://iconmonstr.com -->

    <!-- Twitter icon -->
    <span class="my-span-icon">
        <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
          <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
        </a>
      </span>

      <!-- RSS icon -->
      
        <span class="my-span-icon">
          <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
          </a>
        </span>
      
      <!-- Contact icon -->
      
      
        <span class="my-span-icon">
          <a href="/about.html" aria-label="Contact" title="Contact ">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
          </a>
        </span>
      

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
              
              
            
          
            
            
          
            
            
              
                <a class="page-link" href="/about.html">About</a>
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    
    
    

    <section class="page-header">
      <h1 class="project-name">White Noise</h1>
      <h2 class="project-tagline"></h2>
      
      <!-- Post tagline -->
      
        <h2 class="project-date">
        <time datetime="2018-09-02T00:00:00+02:00" itemprop="datePublished">
          
          Sep 2, 2018
        </time>
        
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ronja Böhringer</span></span>
        
        </h2>
      
      <!-- End: Post tagline -->
    </section>

    <section class="main-content">

      <article itemscope itemtype="http://schema.org/BlogPosting">

  <!-- <header class="post-header">
    <h1 class="post-title" itemprop="name headline">White Noise</h1>
    <p class="post-meta">
      <time datetime="2018-09-02T00:00:00+02:00" itemprop="datePublished">
        
        Sep 2, 2018
      </time>
      </p>
  </header> -->

  
<ul>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#scalar-noise-from-3d-input">Scalar noise from 3d Input</a></li>
  <li><a href="#different-input-and-output">Different Input and Output</a></li>
  <li><a href="#cells">Cells</a></li>
  <li><a href="#source">Source</a></li>
</ul>

  <div itemprop="articleBody">
    <h2 id="summary">Summary</h2>
<p>For many effects we want random numbers to generate patterns or other things in our shaders. Directly using those random values generates a pattern we call “white noise”. There are other patterns which have more structure we can generate based on that which we will explore in other tutorials, for example perlin and voronoi noise. For this tutorial we will implement the noise in a surface shader so you should know how to write a <a href="/2018/03/30/simple-surface.html">basic surface shader</a>).</p>

<p><img src="/assets/images/posts/024/Result.png" alt="" /></p>

<h2 id="scalar-noise-from-3d-input">Scalar noise from 3d Input</h2>
<p>In shaders we can’t easily save variables from one frame of rendering to the next, so our random numbers have to depend on the variables we do have access to. For this example I’m going to use the world position, but if we want animated noise, we can also factor in the time.</p>

<p>To have access to the world position we just have to add a variabel called <code class="language-plaintext highlighter-rouge">worldPos</code> to our input struct. We’ll also remove the uv coordinates for the texture because we won’t use it for the example.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
    <span class="n">float3</span> <span class="n">worldPos</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll write the random generation of the noise values in their own function to make it easy to use it at different positions and reuse it in other shaders. The first iteration of the function will take any 3d value and return a random scalar value with components between 0 and 1. the first step is to convert the 3d value we have into a scalar 1d value. A easy way that works for our purposes here is to take the dot product with another 3d vector. The resulting value will become really high though, so we take the result of the dot product and only take the fractional part, the part after the <code class="language-plaintext highlighter-rouge">.</code> of a decimal number. We can do that in hlsl with the <code class="language-plaintext highlighter-rouge">frac</code> function.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">rand</span><span class="p">(</span><span class="n">float3</span> <span class="n">vec</span><span class="p">){</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">));</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">random</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If we now call the function with the world position as a parameter and write the result to the albedo of the material we can already see a result.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldPos</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p><img src="/assets/images/posts/024/DotFrac.png" alt="" /></p>

<p><img src="/assets/images/posts/024/DotFracClose.png" alt="" /></p>

<p>The biggest problem with the values we get from the function is that we can see fairly quickly that they’re not “very random”, we can see the bands the dot function creates. The solution to this might seem hacky, but it’s fast and works for our cases. We simply multiply the random value with a very high number before taking the fraction so the bands become so small we can’t see them anymore.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">rand</span><span class="p">(</span><span class="n">float3</span> <span class="n">vec</span><span class="p">){</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">));</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">random</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p><img src="/assets/images/posts/024/SimpleRandom.png" alt="" /></p>

<p>Theres a new problem that arises from that though. Namely that by multiplying the value by a high number, we quickly move towards the maximum range that floating point numbers can represent when we move our object away from the origin of the scene.</p>

<p><img src="/assets/images/posts/024/FloatRange.png" alt="" /></p>

<p>The fix for that is to use a operation that limits the range of the random value to a low number before multiplying it with a big number. I just use a sine function here (apparently they’re just a expensive as multiplications or additions in shaders because they’re calculated in special calculation units, who knew…). And if we’re concerned about artafects when looking really close at the material when the object has a position in the low thousands we can also use a sine function to limit the range of the input vector before taking the dot product.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//get a scalar random value from a 3d value</span>
<span class="kt">float</span> <span class="nf">rand</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
    <span class="c1">//make value smaller to avoid artefacts</span>
    <span class="n">float3</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="c1">//get scalar value from 3d vector</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">));</span>
    <span class="c1">//make value more random by making it bigger and then taking teh factional part</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="different-input-and-output">Different Input and Output</h2>
<p>To output more dimensional vectors we can simply call the function multiple times for different directions, but we have to use different parameters so we don’t get the same value for all axes. The easiest way to do that is to take the dot product with a different vector. To pass a different vector to the rand function we allow the caller to pass a different value to take the dot product with, but also allow the possibility to not do that and use the previous value as a default value. Because we add more random functions, we will also rename the existing one to <code class="language-plaintext highlighter-rouge">rand3dTo1d</code> to make the difference to the other ones clear.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//get a scalar random value from a 3d value</span>
<span class="kt">float</span> <span class="nf">rand3dTo1d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">,</span> <span class="n">float3</span> <span class="n">dotDir</span> <span class="o">=</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)){</span>
    <span class="c1">//make value smaller to avoid artefacts</span>
    <span class="n">float3</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="c1">//get scalar value from 3d vector</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">dotDir</span><span class="p">);</span>
    <span class="c1">//make value more random by making it bigger and then taking teh factional part</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To write a 3d to 3d noise function we can now call the 3d to 1d one 3 times, once per component of the random vector we’re returning, each time with a different vector to do the dot product with. This will then create more colorful noise, in opposition to the greyscale noise we had previously. The reason we call the existing function three times instead of writing a new one and not converting the 3d value to a scalar value is that this way we make sure the different components are independent from each other, otherwise the x output would be mainly driven by the x input etc. which can lead to undesirable results.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//get a 3d random value from a 3d value</span>
<span class="n">float3</span> <span class="nf">rand3dTo3d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)),</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">,</span> <span class="mi">83</span><span class="p">.</span><span class="mi">155</span><span class="p">)),</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">73</span><span class="p">.</span><span class="mi">156</span><span class="p">,</span> <span class="mi">52</span><span class="p">.</span><span class="mi">235</span><span class="p">,</span> <span class="mi">09</span><span class="p">.</span><span class="mi">151</span><span class="p">))</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand3dTo3d</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldPos</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p><img src="/assets/images/posts/024/ColorfulWhiteNoise.png" alt="" /></p>

<p>To create functions that take a 2d input we simply take the dot product with another 2d vector to get a scalar value. And to use a scalar input we just leave out the step with the dot product because we don’t need to convert it to a scalar value, as a variable to get different results for the same input, we’ll add a mutator variable similar to the vector for the multiple dimension input methods. We then add the mutator to our input variable before doing the other random operations. Having a default mutator that’s not 1 and is added, also has the advantage that when we input a value of 0 into the function we don’t get 0 as a result, which could lead to weird artefacts otherwise. With this knowledge we can create 9 methods that take all different inputs and outputs. The advantage of writing all of them down now, is that we never have to write them down again. We don’t even have to copy them if we put them in a include file.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//to 1d functions</span>

<span class="c1">//get a scalar random value from a 3d value</span>
<span class="kt">float</span> <span class="nf">rand3dTo1d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">,</span> <span class="n">float3</span> <span class="n">dotDir</span> <span class="o">=</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)){</span>
    <span class="c1">//make value smaller to avoid artefacts</span>
    <span class="n">float3</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="c1">//get scalar value from 3d vector</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">dotDir</span><span class="p">);</span>
    <span class="c1">//make value more random by making it bigger and then taking the factional part</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">rand2dTo1d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">,</span> <span class="n">float2</span> <span class="n">dotDir</span> <span class="o">=</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)){</span>
    <span class="n">float2</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">dotDir</span><span class="p">);</span>
    <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">rand1dTo1d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">,</span> <span class="kt">float</span> <span class="n">mutator</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">546</span><span class="p">){</span>
	<span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="n">mutator</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//to 2d functions</span>

<span class="n">float2</span> <span class="nf">rand3dTo2d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)),</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">,</span> <span class="mi">83</span><span class="p">.</span><span class="mi">155</span><span class="p">))</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="n">float2</span> <span class="nf">rand2dTo2d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)),</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">))</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="n">float2</span> <span class="nf">rand1dTo2d</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">9812</span><span class="p">),</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">1536</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="c1">//to 3d functions</span>

<span class="n">float3</span> <span class="nf">rand3dTo3d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)),</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">,</span> <span class="mi">83</span><span class="p">.</span><span class="mi">155</span><span class="p">)),</span>
        <span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">73</span><span class="p">.</span><span class="mi">156</span><span class="p">,</span> <span class="mi">52</span><span class="p">.</span><span class="mi">235</span><span class="p">,</span> <span class="mi">09</span><span class="p">.</span><span class="mi">151</span><span class="p">))</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="n">float3</span> <span class="nf">rand2dTo3d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)),</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">)),</span>
        <span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">73</span><span class="p">.</span><span class="mi">156</span><span class="p">,</span> <span class="mi">52</span><span class="p">.</span><span class="mi">235</span><span class="p">))</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="n">float3</span> <span class="nf">rand1dTo3d</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
        <span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">9812</span><span class="p">),</span>
        <span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">1536</span><span class="p">),</span>
        <span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">5</span><span class="p">.</span><span class="mi">7241</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To put the functions in a include file we create a new file in our project and call it <code class="language-plaintext highlighter-rouge">WhiteNoise.cginc</code>. We have to change the name manually outside of Unity because it doesn’t recognize the file ending. Then we copy all of our noise functions into the new file. Then in the original shader we just add the line</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "WhiteNoise.cginc"
</span></code></pre></div></div>

<p>somewhere at the top of our cgprogram and we have access to all of the functions without having them cluttering our main file.</p>

<p>To make sure we don’t include our file multiple times in the future we can add a “include guard” around the functions in the file. If we don’t do that and somehow accidentally include the file twice the compiler will complain about multiple functions having the same name even though it’s the same function multiple times.</p>

<p>The include guard first checks if the file was not already included via <code class="language-plaintext highlighter-rouge">#ifndef WHITE_NOISE</code> then, if it hasn’t, we can declare it as included with the line <code class="language-plaintext highlighter-rouge">#define WHITE_NOISE</code> and at the end of the file we can end the part that’s only used when white noise isn’t define with <code class="language-plaintext highlighter-rouge">#endif</code>.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef WHITE_NOISE
#define WHITE_NOISE
</span>
<span class="c1">//our library functions</span>

<span class="cp">#endif
</span></code></pre></div></div>

<h2 id="cells">Cells</h2>
<p>Right now we generate the random positions based on the exact position of the surface we render. Because those values are so exact and small, the result looks very noisy(duh’) and changes a lot as soon as we move the object or the camera. A solution for that is to divide space into separate cells and generate the same random value for every point in a cell. The only thing we need to do to put our points into cells is to get the same value for all points in a cell. We do this by flooring the input, so for example all values from 1.0 to 2.0 will all use 1.0 as a value to generate a color.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">float3</span> <span class="n">value</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldPos</span><span class="p">);</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand3dTo3d</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p><img src="/assets/images/posts/024/1Cells.png" alt="" /></p>

<p>Now that we have clear cells which have distinct values, next we want to change the size of those cells. We do this with a new property.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Properties</span> <span class="p">{</span>
    <span class="n">_CellSize</span> <span class="p">(</span><span class="s">"Cell Size"</span><span class="p">,</span> <span class="n">Vector</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">float3</span> <span class="n">_CellSize</span><span class="p">;</span>
</code></pre></div></div>

<p>Now that we have all variables we need, we simply divide the world position by the cell size before we floor it. This way if the cell size is low, the value changes more and will trigger more steps with different colors, and make smaller cells appear. For example a cell size of 0.1 will make the value go from 0 to 10 in one unit, giving it 10 cells, each with the size of 0.1 units.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">float3</span> <span class="n">value</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldPos</span> <span class="o">/</span> <span class="n">_CellSize</span><span class="p">);</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand3dTo3d</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/024/Cells.png" alt="" /></p>

<h2 id="source">Source</h2>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/024_white_noise/random"</span> <span class="p">{</span>
	<span class="n">Properties</span> <span class="p">{</span>
	<span class="p">}</span>
	<span class="n">SubShader</span> <span class="p">{</span>
		<span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

		<span class="n">CGPROGRAM</span>

		<span class="cp">#pragma surface surf Standard fullforwardshadows
</span>		<span class="cp">#pragma target 3.0
</span>
		<span class="cp">#include "WhiteNoise.cginc"
</span>
		<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
			<span class="n">float3</span> <span class="n">worldPos</span><span class="p">;</span>
		<span class="p">};</span>

		<span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">float3</span> <span class="n">value</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">worldPos</span><span class="p">;</span>
			<span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand3dTo3d</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">ENDCG</span>
	<span class="p">}</span>
	<span class="n">FallBack</span> <span class="s">"Standard"</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/024_white_noise/cells"</span> <span class="p">{</span>
	<span class="n">Properties</span> <span class="p">{</span>
		<span class="n">_CellSize</span> <span class="p">(</span><span class="s">"Cell Size"</span><span class="p">,</span> <span class="n">Vector</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="n">SubShader</span> <span class="p">{</span>
		<span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

		<span class="n">CGPROGRAM</span>

		<span class="cp">#pragma surface surf Standard fullforwardshadows
</span>		<span class="cp">#pragma target 3.0
</span>
		<span class="cp">#include "WhiteNoise.cginc"
</span>
		<span class="n">float3</span> <span class="n">_CellSize</span><span class="p">;</span>

		<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
			<span class="n">float3</span> <span class="n">worldPos</span><span class="p">;</span>
		<span class="p">};</span>

		<span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">float3</span> <span class="n">value</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldPos</span> <span class="o">/</span> <span class="n">_CellSize</span><span class="p">);</span>
			<span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">rand3dTo3d</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">ENDCG</span>
	<span class="p">}</span>
	<span class="n">FallBack</span> <span class="s">"Standard"</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifndef WHITE_NOISE
#define WHITE_NOISE
</span>
<span class="c1">//to 1d functions</span>

<span class="c1">//get a scalar random value from a 3d value</span>
<span class="kt">float</span> <span class="nf">rand3dTo1d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">,</span> <span class="n">float3</span> <span class="n">dotDir</span> <span class="o">=</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)){</span>
	<span class="c1">//make value smaller to avoid artefacts</span>
	<span class="n">float3</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
	<span class="c1">//get scalar value from 3d vector</span>
	<span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">dotDir</span><span class="p">);</span>
	<span class="c1">//make value more random by making it bigger and then taking the factional part</span>
	<span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">rand2dTo1d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">,</span> <span class="n">float2</span> <span class="n">dotDir</span> <span class="o">=</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">9898</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)){</span>
	<span class="n">float2</span> <span class="n">smallValue</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
	<span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">smallValue</span><span class="p">,</span> <span class="n">dotDir</span><span class="p">);</span>
	<span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">rand1dTo1d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">,</span> <span class="kt">float</span> <span class="n">mutator</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">546</span><span class="p">){</span>
	<span class="kt">float</span> <span class="n">random</span> <span class="o">=</span> <span class="n">frac</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="n">mutator</span><span class="p">)</span> <span class="o">*</span> <span class="mi">143758</span><span class="p">.</span><span class="mi">5453</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">random</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//to 2d functions</span>

<span class="n">float2</span> <span class="nf">rand3dTo2d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
		<span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)),</span>
		<span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">,</span> <span class="mi">83</span><span class="p">.</span><span class="mi">155</span><span class="p">))</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="n">float2</span> <span class="nf">rand2dTo2d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)),</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">))</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="n">float2</span> <span class="nf">rand1dTo2d</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float2</span><span class="p">(</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">9812</span><span class="p">),</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">1536</span><span class="p">)</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="c1">//to 3d functions</span>

<span class="n">float3</span> <span class="nf">rand3dTo3d</span><span class="p">(</span><span class="n">float3</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
		<span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">,</span> <span class="mi">37</span><span class="p">.</span><span class="mi">719</span><span class="p">)),</span>
		<span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">,</span> <span class="mi">83</span><span class="p">.</span><span class="mi">155</span><span class="p">)),</span>
		<span class="n">rand3dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">73</span><span class="p">.</span><span class="mi">156</span><span class="p">,</span> <span class="mi">52</span><span class="p">.</span><span class="mi">235</span><span class="p">,</span> <span class="mi">09</span><span class="p">.</span><span class="mi">151</span><span class="p">))</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="n">float3</span> <span class="nf">rand2dTo3d</span><span class="p">(</span><span class="n">float2</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">12</span><span class="p">.</span><span class="mi">989</span><span class="p">,</span> <span class="mi">78</span><span class="p">.</span><span class="mi">233</span><span class="p">)),</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">346</span><span class="p">,</span> <span class="mi">11</span><span class="p">.</span><span class="mi">135</span><span class="p">)),</span>
		<span class="n">rand2dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">float2</span><span class="p">(</span><span class="mi">73</span><span class="p">.</span><span class="mi">156</span><span class="p">,</span> <span class="mi">52</span><span class="p">.</span><span class="mi">235</span><span class="p">))</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="n">float3</span> <span class="nf">rand1dTo3d</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
	<span class="k">return</span> <span class="n">float3</span><span class="p">(</span>
		<span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">9812</span><span class="p">),</span>
		<span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">1536</span><span class="p">),</span>
		<span class="n">rand1dTo1d</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">5</span><span class="p">.</span><span class="mi">7241</span><span class="p">)</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif
</span></code></pre></div></div>

<p>You can also find the source here:</p>
<ul>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/WhiteNoise.cginc">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/WhiteNoise.cginc</a></li>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/white_noise_random.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/white_noise_random.shader</a></li>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/white_noise_cells.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/024_White_Noise/white_noise_cells.shader</a></li>
</ul>

<p>I hope you know how to generate random numbers in hlsl now. The next few tutorials will build on this to generate different kinds of random patterns.</p>


    <p>
        You can also find me on twitter at <a href="https://www.twitter.com/totallyRonja">@totallyRonja</a>. If you liked my tutorial and want to support me you can do that on Patreon (<a href="https://www.patreon.com/RonjaTutorials">patreon.com/RonjaTutorials</a>) or Ko-Fi (<a href="https://ko-fi.com/RonjaTutorials">ko-fi.com/RonjaTutorials</a>).
    </p>
  </div>

  
    <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://ronja-tutorials.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
  
</article>


      <!-- SVG icons from https://iconmonstr.com -->

      <!-- Twitter icon -->
      <span class="my-span-icon">
          <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
          </a>
        </span>

        <!-- RSS icon -->
        
          <span class="my-span-icon">
            <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
            </a>
          </span>
        
        <!-- Contact icon -->
        
        
          <span class="my-span-icon">
            <a href="/about.html" aria-label="Contact" title="Contact ">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
            </a>
          </span>
        
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-124040112-1', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
