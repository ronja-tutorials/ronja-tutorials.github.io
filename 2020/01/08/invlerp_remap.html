<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- Non social metatags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#157878">

    

    <title>Inverse Lerp and Remap</title>

    
      <!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">












<!-- Place this data between the <head> tags of your website -->

  <meta name="author" content="Ronja Böhringer">

<meta name="description" content="In a previous tutorial I explained how the builtin lerp function works. Now I want to add the inverse lerp as well as the remap functions to this. Th..." />





<!-- Schema.org markup for Google+ -->
<meta itemprop="name" content="Inverse Lerp and Remap">
<meta itemprop="description" content="In a previous tutorial I explained how the builtin lerp function works. Now I want to add the inverse lerp as well as the remap functions to this. Th...">

  <meta itemprop="image" content="https://www.ronja-tutorials.com/assets/images/posts/047/result.png">


<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">



<meta name="twitter:title" content="Inverse Lerp and Remap">
<meta name="twitter:description" content="In a previous tutorial I explained how the builtin lerp function works. Now I want to add the inverse lerp as well as the remap functions to this. Th...">


  <meta name="twitter:creator" content="@TotallyRonja">


<!-- Twitter summary card with large image must be at least 280x150px -->

  <meta name="twitter:image:src" content="https://www.ronja-tutorials.com/assets/images/posts/047/result.png">
  <meta property="twitter:image" content="https://www.ronja-tutorials.com/assets/images/posts/047/result.png">

<meta property="twitter:url" content="https://www.ronja-tutorials.com/2020/01/08/invlerp_remap.html">

<!-- Open Graph data -->
<meta property="og:title" content="Inverse Lerp and Remap" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ronja-tutorials.com/2020/01/08/invlerp_remap.html" />

  <meta property="og:image" content="https://www.ronja-tutorials.com/assets/images/posts/047/result.png" />

<meta property="og:description" content="In a previous tutorial I explained how the builtin lerp function works. Now I want to add the inverse lerp as well as the remap functions to this. Th..." />
<meta property="og:site_name" content="Ronja's Shader Tutorials" />

  <meta property="article:published_time" content="2020-01-08T00:00:00+01:00" />














  





  




    

    <link rel="canonical" href="https://www.ronja-tutorials.com/2020/01/08/invlerp_remap.html">

    

    <!-- <link rel="shortcut icon" href="https://www.ronja-tutorials.com/favicon.ico"> -->
    <meta name="robots" content="noarchive">

    <!-- <link rel="alternate" media="only screen and (max-width: 640px)" href="">
    <link rel="alternate" media="handheld" href=""> -->


    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script async defer data-website-id="fb34d410-ef67-4a3a-8fdc-01a05f5e22b2" src="https://stats.ruby0x1.ca/umami.js" ></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="/">Ronja&#39;s Shader Tutorials</a>
    
    <!-- SVG icons from https://iconmonstr.com -->

    <!-- Twitter icon -->
    <span class="my-span-icon">
        <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
          <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
        </a>
      </span>

      <!-- RSS icon -->
      
        <span class="my-span-icon">
          <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
          </a>
        </span>
      
      <!-- Contact icon -->
      
      
        <span class="my-span-icon">
          <a href="/about.html" aria-label="Contact" title="Contact ">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
          </a>
        </span>
      

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
              
              
            
          
            
            
          
            
            
              
                <a class="page-link" href="/about.html">About</a>
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    
    
    

    <section class="page-header">
      <h1 class="project-name">Inverse Lerp and Remap</h1>
      <h2 class="project-tagline"></h2>
      
      <!-- Post tagline -->
      
        <h2 class="project-date">
        <time datetime="2020-01-08T00:00:00+01:00" itemprop="datePublished">
          
          Jan 8, 2020
        </time>
        
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ronja Böhringer</span></span>
        
        </h2>
      
      <!-- End: Post tagline -->
    </section>

    <section class="main-content">

      <article itemscope itemtype="http://schema.org/BlogPosting">

  <!-- <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Inverse Lerp and Remap</h1>
    <p class="post-meta">
      <time datetime="2020-01-08T00:00:00+01:00" itemprop="datePublished">
        
        Jan 8, 2020
      </time>
      </p>
  </header> -->

  
<ul>
  <li><a href="#example-shader">Example Shader</a></li>
  <li><a href="#inverse-lerp">Inverse Lerp</a></li>
  <li><a href="#remap">Remap</a></li>
  <li><a href="#sources">Sources</a></li>
</ul>

  <div itemprop="articleBody">
    <p>In a <a href="/2018/05/03/interpolating-colors.html">previous tutorial</a> I explained how the builtin <code class="language-plaintext highlighter-rouge">lerp</code> function works. Now I want to add the inverse lerp as well as the remap functions to this. They’re not builtin functions so we’ll have to write our own implementations. While this is a tutorial that focuses on explaining mathematical concepts, they resolve into basic addition and multiplication pretty quickly so I hope it isn’t too hard.</p>

<p><img src="/assets/images/posts/047/result.png" alt="" /></p>

<h2 id="example-shader">Example Shader</h2>

<p>The base shader is pretty barebones, a little more complex than <a href="/basics.html">a completely unlit one</a>. I decided to write the custom functions in a separate include file which I named Interpolation.cginc, but you can just as well copy-paste the functions into your main shader file. As the “blending variable” I used the y component of the UV coordinates so it’s immediately visible what the function does over a gradient from 0 to 1.</p>

<p>A shader version for a regular linear interpolation looks like this:</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/047_InvLerp_Remap/Lerp"</span><span class="p">{</span>
  <span class="c1">//show values to edit in inspector</span>
  <span class="n">Properties</span><span class="p">{</span>
    <span class="n">_FromColor</span> <span class="p">(</span><span class="s">"From Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">//the base color</span>
    <span class="n">_ToColor</span> <span class="p">(</span><span class="s">"To Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//the color to blend to</span>
  <span class="p">}</span>

  <span class="n">SubShader</span><span class="p">{</span>
    <span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
    <span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

    <span class="n">Pass</span><span class="p">{</span>
      <span class="n">CGPROGRAM</span>

      <span class="c1">//include useful shader functions</span>
      <span class="cp">#include "UnityCG.cginc"
</span>      <span class="cp">#include "Interpolation.cginc"
</span>
      <span class="c1">//define vertex and fragment shader</span>
      <span class="cp">#pragma vertex vert
</span>      <span class="cp">#pragma fragment frag
</span>
      <span class="c1">//the colors to blend between</span>
      <span class="n">fixed4</span> <span class="n">_FromColor</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_ToColor</span><span class="p">;</span>

      <span class="c1">//the object data that's put into the vertex shader</span>
      <span class="k">struct</span> <span class="n">appdata</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the data that's used to generate fragments and can be read by the fragment shader</span>
      <span class="k">struct</span> <span class="n">v2f</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the vertex shader</span>
      <span class="n">v2f</span> <span class="n">vert</span><span class="p">(</span><span class="n">appdata</span> <span class="n">v</span><span class="p">){</span>
        <span class="n">v2f</span> <span class="n">o</span><span class="p">;</span>
        <span class="c1">//convert the vertex positions from object space to clip space so they can be rendered</span>
        <span class="n">o</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">UnityObjectToClipPos</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
        <span class="n">o</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">//the fragment shader</span>
      <span class="n">fixed4</span> <span class="n">frag</span><span class="p">(</span><span class="n">v2f</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span><span class="p">{</span>
          <span class="kt">float</span> <span class="n">blend</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">_FromColor</span><span class="p">,</span> <span class="n">_ToColor</span><span class="p">,</span> <span class="n">blend</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">ENDCG</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>And the “barebones” include file looks like this, the <code class="language-plaintext highlighter-rouge">ifdef</code> and <code class="language-plaintext highlighter-rouge">define</code> statements are there to allow including the file multiple times over multiple files without leading to errors.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//avoid multiple imports</span>
<span class="cp">#ifndef INTERPOLATION
#define INTERPOLATION
</span>
<span class="cm">/* //hlsl supports linear interpolation intrinsically so this isn't needed
float lerp(float from, float to, float rel){
  return ((1 - rel) * from) + (rel * to);
}
*/</span>

<span class="cp">#endif
</span></code></pre></div></div>

<h2 id="inverse-lerp">Inverse Lerp</h2>

<p>Lerp does a interpolation that returns values between the <code class="language-plaintext highlighter-rouge">from</code> and <code class="language-plaintext highlighter-rouge">to</code> input values for interpolation values between 0 and 1. The inverse of that is a function which we can hand a third value and it’ll return how close that value is to the first or second value.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="n">inverseLerped</span> <span class="o">=</span> <span class="n">invLerp</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">result</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">inverseLerped</span><span class="p">);</span>
</code></pre></div></div>

<p>In this example the <code class="language-plaintext highlighter-rouge">result</code> should always be the same value as the input <code class="language-plaintext highlighter-rouge">value</code>. Similarly first doing a lerp and then an inverse lerp with the arguments chained like this shouldn’t change anything.</p>

<p>I like the straightforward way we can deduce the function. We start by making sure that if the value is the same as the lower bound, the function returns a <code class="language-plaintext highlighter-rouge">0</code>, we do this by subtracting the <code class="language-plaintext highlighter-rouge">from</code> variable from the value.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">invLerp</span><span class="p">(</span><span class="kt">float</span> <span class="n">from</span><span class="p">,</span> <span class="kt">float</span> <span class="n">to</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
  <span class="k">return</span> <span class="n">value</span> <span class="o">-</span> <span class="n">from</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With this setup the function returns 0 when the input value is equal to the from variable. Next let’s ensure that a input value equal to the to variable results in a output of <code class="language-plaintext highlighter-rouge">1</code>. So far the output would be <code class="language-plaintext highlighter-rouge">from - to</code>, so lets divide the whole thing we wrote so far by <code class="language-plaintext highlighter-rouge">from - to</code>. With this the function is already done.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">invLerp</span><span class="p">(</span><span class="kt">float</span> <span class="n">from</span><span class="p">,</span> <span class="kt">float</span> <span class="n">to</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">from</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">to</span> <span class="o">-</span> <span class="n">from</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>With this you can can get gradients in a 0 to 1 range from any other gradient. You could replace all of the arguments with multidimensional vectors (<code class="language-plaintext highlighter-rouge">float2</code>, <code class="language-plaintext highlighter-rouge">float3</code>, <code class="language-plaintext highlighter-rouge">float4</code>), but it’s far less useful than with <code class="language-plaintext highlighter-rouge">lerp</code> unless you want a component-wise inverse lerp.</p>

<p><img src="/assets/images/posts/047/InvLerp.gif" alt="" /></p>

<p>The <code class="language-plaintext highlighter-rouge">smoothstep</code> function that’s built into hlsl does almost the same as our inverse lerp function, but it also applies cubic smoothing, so it’s marginally more expensive to calculate and only works between 0 and 1 while our function can also extrapolate. It’s best to try around with both to get a feel for which to use for which occasion. (I admit I use smoothstep a lot when invLerp would be better, just because I don’t have to add the function to the project…)</p>

<h2 id="remap">Remap</h2>

<p>I mentioned earlier that chaining inverse lerp and lerp with the same arguments results in no change. While this is still true, we can chain them with different arguments for the lower and upper bounds. The custom remap function I wrote takes 5 arguments, the source bounds as well as the target bounds and the original value. The “remap” action then remaps those values so the a original value of the source <code class="language-plaintext highlighter-rouge">from</code> value will become a target <code class="language-plaintext highlighter-rouge">from</code> value. Similarly the <code class="language-plaintext highlighter-rouge">to</code> values and those inbetween. This allows you to remap linear gradients however you want.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">remap</span><span class="p">(</span><span class="kt">float</span> <span class="n">origFrom</span><span class="p">,</span> <span class="kt">float</span> <span class="n">origTo</span><span class="p">,</span> <span class="kt">float</span> <span class="n">targetFrom</span><span class="p">,</span> <span class="kt">float</span> <span class="n">targetTo</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
  <span class="kt">float</span> <span class="n">rel</span> <span class="o">=</span> <span class="n">invLerp</span><span class="p">(</span><span class="n">origFrom</span><span class="p">,</span> <span class="n">origTo</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">lerp</span><span class="p">(</span><span class="n">targetFrom</span><span class="p">,</span> <span class="n">targetTo</span><span class="p">,</span> <span class="n">rel</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This also has more of a use with vectors because it can be used to set the whitelevel of a color output. After also creating the same vector version for the invLerp function you can create a multidimensional version by replacing all <code class="language-plaintext highlighter-rouge">float</code> with the fitting vector version.</p>

<p><img src="/assets/images/posts/047/Remap.png" alt="" /></p>

<h2 id="sources">Sources</h2>

<ul>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/Interpolation.cginc">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/Interpolation.cginc</a></li>
</ul>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//avoid multiple imports</span>
<span class="cp">#ifndef INTERPOLATION
#define INTERPOLATION
</span>
<span class="cm">/* //hlsl supports linear interpolation intrinsically so this isn't needed
float lerp(float from, float to, float rel){
  return ((1 - rel) * from) + (rel * to);
}
*/</span>

<span class="kt">float</span> <span class="nf">invLerp</span><span class="p">(</span><span class="kt">float</span> <span class="n">from</span><span class="p">,</span> <span class="kt">float</span> <span class="n">to</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">from</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">to</span> <span class="o">-</span> <span class="n">from</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">float4</span> <span class="nf">invLerp</span><span class="p">(</span><span class="n">float4</span> <span class="n">from</span><span class="p">,</span> <span class="n">float4</span> <span class="n">to</span><span class="p">,</span> <span class="n">float4</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">from</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">to</span> <span class="o">-</span> <span class="n">from</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">remap</span><span class="p">(</span><span class="kt">float</span> <span class="n">origFrom</span><span class="p">,</span> <span class="kt">float</span> <span class="n">origTo</span><span class="p">,</span> <span class="kt">float</span> <span class="n">targetFrom</span><span class="p">,</span> <span class="kt">float</span> <span class="n">targetTo</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">){</span>
  <span class="kt">float</span> <span class="n">rel</span> <span class="o">=</span> <span class="n">invLerp</span><span class="p">(</span><span class="n">origFrom</span><span class="p">,</span> <span class="n">origTo</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">lerp</span><span class="p">(</span><span class="n">targetFrom</span><span class="p">,</span> <span class="n">targetTo</span><span class="p">,</span> <span class="n">rel</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">float4</span> <span class="nf">remap</span><span class="p">(</span><span class="n">float4</span> <span class="n">origFrom</span><span class="p">,</span> <span class="n">float4</span> <span class="n">origTo</span><span class="p">,</span> <span class="n">float4</span> <span class="n">targetFrom</span><span class="p">,</span> <span class="n">float4</span> <span class="n">targetTo</span><span class="p">,</span> <span class="n">float4</span> <span class="n">value</span><span class="p">){</span>
  <span class="n">float4</span> <span class="n">rel</span> <span class="o">=</span> <span class="n">invLerp</span><span class="p">(</span><span class="n">origFrom</span><span class="p">,</span> <span class="n">origTo</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">lerp</span><span class="p">(</span><span class="n">targetFrom</span><span class="p">,</span> <span class="n">targetTo</span><span class="p">,</span> <span class="n">rel</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif
</span></code></pre></div></div>

<ul>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/InvLerp.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/InvLerp.shader</a></li>
</ul>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/047_InvLerp_Remap/InvLerp"</span><span class="p">{</span>
  <span class="c1">//show values to edit in inspector</span>
  <span class="n">Properties</span><span class="p">{</span>
    <span class="n">_SrcZeroValue</span> <span class="p">(</span><span class="s">"Src 0 Value"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//source min value</span>
    <span class="n">_SrcOneValue</span> <span class="p">(</span><span class="s">"Src 1 Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//source max value</span>
    <span class="n">_TargetZeroValue</span> <span class="p">(</span><span class="s">"Target 0 Value"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//target min value</span>
    <span class="n">_TargetOneValue</span> <span class="p">(</span><span class="s">"Target 1 Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//target max value</span>
  <span class="p">}</span>

  <span class="n">SubShader</span><span class="p">{</span>
    <span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
    <span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

    <span class="n">Pass</span><span class="p">{</span>
      <span class="n">CGPROGRAM</span>

      <span class="c1">//include useful shader functions</span>
      <span class="cp">#include "UnityCG.cginc"
</span>      <span class="cp">#include "Interpolation.cginc"
</span>
      <span class="c1">//define vertex and fragment shader</span>
      <span class="cp">#pragma vertex vert
</span>      <span class="cp">#pragma fragment frag
</span>
      <span class="c1">//the colors to blend between</span>
      <span class="n">fixed4</span> <span class="n">_SrcZeroValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_SrcOneValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_TargetZeroValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_TargetOneValue</span><span class="p">;</span>

      <span class="c1">//the object data that's put into the vertex shader</span>
      <span class="k">struct</span> <span class="n">appdata</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the data that's used to generate fragments and can be read by the fragment shader</span>
      <span class="k">struct</span> <span class="n">v2f</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the vertex shader</span>
      <span class="n">v2f</span> <span class="n">vert</span><span class="p">(</span><span class="n">appdata</span> <span class="n">v</span><span class="p">){</span>
        <span class="n">v2f</span> <span class="n">o</span><span class="p">;</span>
        <span class="c1">//convert the vertex positions from object space to clip space so they can be rendered</span>
        <span class="n">o</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">UnityObjectToClipPos</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
        <span class="n">o</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">//the fragment shader</span>
      <span class="n">fixed4</span> <span class="n">frag</span><span class="p">(</span><span class="n">v2f</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span><span class="p">{</span>
          <span class="kt">float</span> <span class="n">blend</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
          <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">remap</span><span class="p">(</span><span class="n">_SrcZeroValue</span><span class="p">,</span> <span class="n">_SrcOneValue</span><span class="p">,</span> <span class="n">_TargetZeroValue</span><span class="p">,</span> <span class="n">_TargetOneValue</span><span class="p">,</span> <span class="n">blend</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">ENDCG</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/Remap.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/047_InverseInterpolationAndRemap/Remap.shader</a></li>
</ul>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/047_InvLerp_Remap/Remap"</span><span class="p">{</span>
  <span class="c1">//show values to edit in inspector</span>
  <span class="n">Properties</span><span class="p">{</span>
    <span class="n">_SrcZeroValue</span> <span class="p">(</span><span class="s">"Src 0 Value"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//source min value</span>
    <span class="n">_SrcOneValue</span> <span class="p">(</span><span class="s">"Src 1 Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//source max value</span>
    <span class="n">_TargetZeroValue</span> <span class="p">(</span><span class="s">"Target 0 Value"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//target min value</span>
    <span class="n">_TargetOneValue</span> <span class="p">(</span><span class="s">"Target 1 Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//target max value</span>
  <span class="p">}</span>

  <span class="n">SubShader</span><span class="p">{</span>
    <span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
    <span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

    <span class="n">Pass</span><span class="p">{</span>
      <span class="n">CGPROGRAM</span>

      <span class="c1">//include useful shader functions</span>
      <span class="cp">#include "UnityCG.cginc"
</span>      <span class="cp">#include "Interpolation.cginc"
</span>
      <span class="c1">//define vertex and fragment shader</span>
      <span class="cp">#pragma vertex vert
</span>      <span class="cp">#pragma fragment frag
</span>
      <span class="c1">//the colors to blend between</span>
      <span class="n">fixed4</span> <span class="n">_SrcZeroValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_SrcOneValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_TargetZeroValue</span><span class="p">;</span>
      <span class="n">fixed4</span> <span class="n">_TargetOneValue</span><span class="p">;</span>

      <span class="c1">//the object data that's put into the vertex shader</span>
      <span class="k">struct</span> <span class="n">appdata</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the data that's used to generate fragments and can be read by the fragment shader</span>
      <span class="k">struct</span> <span class="n">v2f</span><span class="p">{</span>
        <span class="n">float4</span> <span class="n">position</span> <span class="o">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
        <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">//the vertex shader</span>
      <span class="n">v2f</span> <span class="n">vert</span><span class="p">(</span><span class="n">appdata</span> <span class="n">v</span><span class="p">){</span>
        <span class="n">v2f</span> <span class="n">o</span><span class="p">;</span>
        <span class="c1">//convert the vertex positions from object space to clip space so they can be rendered</span>
        <span class="n">o</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">UnityObjectToClipPos</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
        <span class="n">o</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">//the fragment shader</span>
      <span class="n">fixed4</span> <span class="n">frag</span><span class="p">(</span><span class="n">v2f</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_TARGET</span><span class="p">{</span>
          <span class="kt">float</span> <span class="n">blend</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
          <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">remap</span><span class="p">(</span><span class="n">_SrcZeroValue</span><span class="p">,</span> <span class="n">_SrcOneValue</span><span class="p">,</span> <span class="n">_TargetZeroValue</span><span class="p">,</span> <span class="n">_TargetOneValue</span><span class="p">,</span> <span class="n">blend</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="n">ENDCG</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


    <p>
        You can also find me on twitter at <a href="https://www.twitter.com/totallyRonja">@totallyRonja</a>. If you liked my tutorial and want to support me you can do that on Patreon (<a href="https://www.patreon.com/RonjaTutorials">patreon.com/RonjaTutorials</a>) or Ko-Fi (<a href="https://ko-fi.com/RonjaTutorials">ko-fi.com/RonjaTutorials</a>).
    </p>
  </div>

  
    <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://ronja-tutorials.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
  
</article>


      <!-- SVG icons from https://iconmonstr.com -->

      <!-- Twitter icon -->
      <span class="my-span-icon">
          <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
          </a>
        </span>

        <!-- RSS icon -->
        
          <span class="my-span-icon">
            <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
            </a>
          </span>
        
        <!-- Contact icon -->
        
        
          <span class="my-span-icon">
            <a href="/about.html" aria-label="Contact" title="Contact ">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
            </a>
          </span>
        
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-124040112-1', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
