<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- Non social metatags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#157878">

    

    <title>Fresnel</title>

    
      <!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">












<!-- Place this data between the <head> tags of your website -->

  <meta name="author" content="Ronja Böhringer">

<meta name="description" content="Summary" />





<!-- Schema.org markup for Google+ -->
<meta itemprop="name" content="Fresnel">
<meta itemprop="description" content="Summary">

  <meta itemprop="image" content="https://www.ronja-tutorials.com/assets/images/posts/012/Result.jpg">


<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">



<meta name="twitter:title" content="Fresnel">
<meta name="twitter:description" content="Summary">


  <meta name="twitter:creator" content="@TotallyRonja">


<!-- Twitter summary card with large image must be at least 280x150px -->

  <meta name="twitter:image:src" content="https://www.ronja-tutorials.com/assets/images/posts/012/Result.jpg">
  <meta property="twitter:image" content="https://www.ronja-tutorials.com/assets/images/posts/012/Result.jpg">

<meta property="twitter:url" content="https://www.ronja-tutorials.com/2018/05/26/fresnel.html">

<!-- Open Graph data -->
<meta property="og:title" content="Fresnel" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ronja-tutorials.com/2018/05/26/fresnel.html" />

  <meta property="og:image" content="https://www.ronja-tutorials.com/assets/images/posts/012/Result.jpg" />

<meta property="og:description" content="Summary" />
<meta property="og:site_name" content="Ronja's Shader Tutorials" />

  <meta property="article:published_time" content="2018-05-26T00:00:00+02:00" />














  





  




    

    <link rel="canonical" href="https://www.ronja-tutorials.com/2018/05/26/fresnel.html">

    

    <!-- <link rel="shortcut icon" href="https://www.ronja-tutorials.com/favicon.ico"> -->
    <meta name="robots" content="noarchive">

    <!-- <link rel="alternate" media="only screen and (max-width: 640px)" href="">
    <link rel="alternate" media="handheld" href=""> -->


    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script async defer data-website-id="fb34d410-ef67-4a3a-8fdc-01a05f5e22b2" src="https://stats.ruby0x1.ca/umami.js" ></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="/">Ronja&#39;s Shader Tutorials</a>
    
    <!-- SVG icons from https://iconmonstr.com -->

    <!-- Twitter icon -->
    <span class="my-span-icon">
        <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
          <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
        </a>
      </span>

      <!-- RSS icon -->
      
        <span class="my-span-icon">
          <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
          </a>
        </span>
      
      <!-- Contact icon -->
      
      
        <span class="my-span-icon">
          <a href="/about.html" aria-label="Contact" title="Contact ">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
          </a>
        </span>
      

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
              
              
            
          
            
            
          
            
            
              
                <a class="page-link" href="/about.html">About</a>
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    
    
    

    <section class="page-header">
      <h1 class="project-name">Fresnel</h1>
      <h2 class="project-tagline"></h2>
      
      <!-- Post tagline -->
      
        <h2 class="project-date">
        <time datetime="2018-05-26T00:00:00+02:00" itemprop="datePublished">
          
          May 26, 2018
        </time>
        
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ronja Böhringer</span></span>
        
        </h2>
      
      <!-- End: Post tagline -->
    </section>

    <section class="main-content">

      <article itemscope itemtype="http://schema.org/BlogPosting">

  <!-- <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Fresnel</h1>
    <p class="post-meta">
      <time datetime="2018-05-26T00:00:00+02:00" itemprop="datePublished">
        
        May 26, 2018
      </time>
      </p>
  </header> -->

  
<ul>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#highlighting-one-side-of-the-model">Highlighting one Side of the Model</a></li>
  <li><a href="#highlighting-the-outer-parts">Highlighting the outer Parts</a></li>
  <li><a href="#add-fresnel-color-and-intensity">Add Fresnel Color and Intensity</a></li>
</ul>

  <div itemprop="articleBody">
    <h2 id="summary">Summary</h2>

<p>A common effect people use in shaders in a fresnel effect. With a fresnel you can darken, lighten or color the outline of your objects, increasing the sense of depth.</p>

<p>For this tutorial we will make a surface shader, so if you follow it directly you should know the basics of surface shaders. You can find a explanation of them <a href="/2018/03/23/basic.html">here</a>. But you can also use a fresnel effect for unlit shaders, giving your objects some smoothness and tangibility without having to implement expensive lighting.</p>

<p><img src="/assets/images/posts/012/Result.jpg" alt="Material with fresnel effect" /></p>

<h2 id="highlighting-one-side-of-the-model">Highlighting one Side of the Model</h2>

<p>We start with the surface shader modify it to show the fresnel. The fresnel uses the normals of the object to determine the intensity of the effect. To get the normals in worldspace in our shader, we add the worldNormal attribute to our input struct as well as the internal data macro. We won’t interact with the internal data at all, but unity needs it to generate the worldspace normal.</p>

<p>You can generate the worldspace normals in non-surface shaders with a simple matrix multiplication, it’s explained in my <a href="/2018/05/11/triplanar-mapping.html">triplanar mapping tutorial</a>.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//input struct which is automatically filled by unity</span>
<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
    <span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
    <span class="n">float3</span> <span class="n">worldNormal</span><span class="p">;</span>
    <span class="n">INTERNAL_DATA</span>
<span class="p">};</span>
</code></pre></div></div>

<p>To get a gradient from that, we take the dot product with another normalized vector. When you take the dot product of two normalized vectors, you get a value that represents how much they align. If they point in the same direction, the dot product returns 1, if they are orthogonal it returns a 0 and if the vectors are opposing it returns a -1.</p>

<p><img src="/assets/images/posts/012/DotSphere.png" alt="A sphere with a dot product" /></p>

<p><img src="/assets/images/posts/012/DotDirection.png" alt="arrows that show which value the dot product has with relative directions" /></p>

<p>First we will just get the dot product of the normal and a static vector so see better how it works. We then write the result into the emission channel, so we can see it well.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//get the dot product between the normal and the direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnel</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/WhiteTopBlackBottom.png" alt="Material dot product added to emissive channel, the bottom is black" /></p>

<p>We can now see that the surface gets brighter where it points up and darker where it points down. To prevent weird results with negative emission, we can clamp the fresnel value to the values between 0 to 1 before using it. For that we’ll use the saturate method. It does the same as a clamp from 0 to 1, but is faster on some GPUs. With that change we see how the fresnel only effects the top of our objects.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//get the dot product between the normal and the direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">float3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
    <span class="c1">//clamp the value between 0 and 1 so we don't get dark artefacts at the backside</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="n">fresnel</span><span class="p">);</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnel</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/WhiteTopBlackBottom.png" alt="Material dot product added to emissive channel, the bottom is black" /></p>

<h2 id="highlighting-the-outer-parts">Highlighting the outer Parts</h2>

<p>The next step is to make the effect relative to our view direction instead of a fixed direction. In surface shaders we get the view direction by just adding it to our input struct.</p>

<p>If you’re making a unlit fresnel shader, you can get the view direction by subtracting the camera position from the world position of your vertex (I explain how to get the worldspace position in my <a href="/2018/04/23/planar-mapping.html">planar mapping tutorial</a> and you can get the camera position from the builtin variable _WorldSpaceCameraPos (you can just use it in your code without adding anything else)).</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//input struct which is automatically filled by unity</span>
<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
    <span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
    <span class="n">float3</span> <span class="n">worldNormal</span><span class="p">;</span>
    <span class="n">float3</span> <span class="n">viewDir</span><span class="p">;</span>
    <span class="n">INTERNAL_DATA</span>
<span class="p">};</span>

<span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//just apply the values for metalness and smoothness</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Metallic</span> <span class="o">=</span> <span class="n">_Metallic</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Smoothness</span> <span class="o">=</span> <span class="n">_Smoothness</span><span class="p">;</span>

    <span class="c1">//get the dot product between the normal and the view direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">viewDir</span><span class="p">);</span>
    <span class="c1">//clamp the value between 0 and 1 so we don't get dark artefacts at the backside</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="n">fresnel</span><span class="p">);</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnel</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/WhiteFront.png" alt="Material with highlighted front" /></p>

<p>That’s already working pretty well, but instead of the outside of the material, it’s illuminating the center of it. To invert that, we simply subtract if from 1, so the bright areas in this version don’t affect the color any more and the unaffected parts get highlighted.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//get the dot product between the normal and the view direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">viewDir</span><span class="p">);</span>
    <span class="c1">//invert the fresnel so the big values are on the outside</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">fresnel</span><span class="p">);</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnel</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/WhiteFresnel.png" alt="Material with white fresnel effect" /></p>

<h2 id="add-fresnel-color-and-intensity">Add Fresnel Color and Intensity</h2>

<p>To finish this shader I’d like to add some customisation options. First we add a fresnel color. For that we need a property and a value for that and then multiply our fresnel value with that color.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//...</span>

<span class="n">_FresnelColor</span> <span class="p">(</span><span class="s">"Fresnel Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">//...</span>

<span class="n">float3</span> <span class="n">_FresnelColor</span><span class="p">;</span>

<span class="c1">//...</span>

<span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//get the dot product between the normal and the view direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">viewDir</span><span class="p">);</span>
    <span class="c1">//invert the fresnel so the big values are on the outside</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">fresnel</span><span class="p">);</span>
    <span class="c1">//combine the fresnel value with a color</span>
    <span class="n">float3</span> <span class="n">fresnelColor</span> <span class="o">=</span> <span class="n">fresnel</span> <span class="o">*</span> <span class="n">_FresnelColor</span><span class="p">;</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnelColor</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//...</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/Result.jpg" alt="purple fresnel effect" /></p>

<p>Next we’ll add a possibility to make the fresnel effect stronger or weaker by adding a exponent to it. We also add the powerslider attribute to the property of the exponent. That way values closer to 0 take up more space on the slider and can be adjusted more accurately (in this example the part of the slider from 0.25 to 1 is almost as big as the part from 1 to 4).</p>

<p>Exponents are pretty expensive so if you find a way to adjust your fresnel that fits you just as well, it’s probably better to switch to that, but exponents are also easy and nice to use.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">//...</span>

<span class="p">[</span><span class="n">PowerSlider</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span> <span class="n">_FresnelExponent</span> <span class="p">(</span><span class="s">"Fresnel Exponent"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">//...</span>

<span class="kt">float</span> <span class="n">_FresnelExponent</span><span class="p">;</span>

<span class="c1">//...</span>

<span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">//...</span>

    <span class="c1">//get the dot product between the normal and the view direction</span>
    <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">viewDir</span><span class="p">);</span>
    <span class="c1">//invert the fresnel so the big values are on the outside</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">fresnel</span><span class="p">);</span>
    <span class="c1">//combine the fresnel value with a color</span>
    <span class="n">float3</span> <span class="n">fresnelColor</span> <span class="o">=</span> <span class="n">fresnel</span> <span class="o">*</span> <span class="n">_FresnelColor</span><span class="p">;</span>
    <span class="c1">//raise the fresnel value to the exponents power to be able to adjust it</span>
    <span class="n">fresnel</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">fresnel</span><span class="p">,</span> <span class="n">_FresnelExponent</span><span class="p">);</span>
    <span class="c1">//apply the fresnel value to the emission</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnelColor</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//...</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/012/ExponentAdjustment.gif" alt="Adjusting the fresnel strength" /></p>

<p>A fresnel effect can also be used to fade textures or other effects among other things, but that’s for you to explore or maybe another tutorial.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/012_Fresnel"</span> <span class="p">{</span>
    <span class="c1">//show values to edit in inspector</span>
    <span class="n">Properties</span> <span class="p">{</span>
        <span class="n">_Color</span> <span class="p">(</span><span class="s">"Tint"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
        <span class="n">_Smoothness</span> <span class="p">(</span><span class="s">"Smoothness"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_Metallic</span> <span class="p">(</span><span class="s">"Metalness"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">[</span><span class="n">HDR</span><span class="p">]</span> <span class="n">_Emission</span> <span class="p">(</span><span class="s">"Emission"</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">_FresnelColor</span> <span class="p">(</span><span class="s">"Fresnel Color"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">[</span><span class="n">PowerSlider</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span> <span class="n">_FresnelExponent</span> <span class="p">(</span><span class="s">"Fresnel Exponent"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">25</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">SubShader</span> <span class="p">{</span>
        <span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
        <span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

        <span class="n">CGPROGRAM</span>

        <span class="c1">//the shader is a surface shader, meaning that it will be extended by unity in the background to have fancy lighting and other features</span>
        <span class="c1">//our surface shader function is called surf and we use the standard lighting model, which means PBR lighting</span>
        <span class="c1">//fullforwardshadows makes sure unity adds the shadow passes the shader might need</span>
        <span class="cp">#pragma surface surf Standard fullforwardshadows
</span>        <span class="cp">#pragma target 3.0
</span>
        <span class="kt">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
        <span class="n">fixed4</span> <span class="n">_Color</span><span class="p">;</span>

        <span class="kr">half</span> <span class="n">_Smoothness</span><span class="p">;</span>
        <span class="kr">half</span> <span class="n">_Metallic</span><span class="p">;</span>
        <span class="n">half3</span> <span class="n">_Emission</span><span class="p">;</span>

        <span class="n">float3</span> <span class="n">_FresnelColor</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">_FresnelExponent</span><span class="p">;</span>

        <span class="c1">//input struct which is automatically filled by unity</span>
        <span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
            <span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
            <span class="n">float3</span> <span class="n">worldNormal</span><span class="p">;</span>
            <span class="n">float3</span> <span class="n">viewDir</span><span class="p">;</span>
            <span class="n">INTERNAL_DATA</span>
        <span class="p">};</span>

        <span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
        <span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutputStandard</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//sample and tint albedo texture</span>
            <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv_MainTex</span><span class="p">);</span>
            <span class="n">col</span> <span class="o">*=</span> <span class="n">_Color</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>

            <span class="c1">//just apply the values for metalness and smoothness</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Metallic</span> <span class="o">=</span> <span class="n">_Metallic</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Smoothness</span> <span class="o">=</span> <span class="n">_Smoothness</span><span class="p">;</span>

            <span class="c1">//get the dot product between the normal and the view direction</span>
            <span class="kt">float</span> <span class="n">fresnel</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">worldNormal</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">viewDir</span><span class="p">);</span>
            <span class="c1">//invert the fresnel so the big values are on the outside</span>
            <span class="n">fresnel</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">fresnel</span><span class="p">);</span>
            <span class="c1">//raise the fresnel value to the exponents power to be able to adjust it</span>
            <span class="n">fresnel</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">fresnel</span><span class="p">,</span> <span class="n">_FresnelExponent</span><span class="p">);</span>
            <span class="c1">//combine the fresnel value with a color</span>
            <span class="n">float3</span> <span class="n">fresnelColor</span> <span class="o">=</span> <span class="n">fresnel</span> <span class="o">*</span> <span class="n">_FresnelColor</span><span class="p">;</span>
            <span class="c1">//apply the fresnel value to the emission</span>
            <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span> <span class="o">+</span> <span class="n">fresnelColor</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">ENDCG</span>
    <span class="p">}</span>
    <span class="n">FallBack</span> <span class="s">"Standard"</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I hope I could help you understand how fresnel effects work and you can use them for your own shaders if you want to.</p>

<p>You can also find the source code for this shader here: <a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/012_Fresnel/Fresnel.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/012_Fresnel/Fresnel.shader</a></p>


    <p>
        You can also find me on twitter at <a href="https://www.twitter.com/totallyRonja">@totallyRonja</a>. If you liked my tutorial and want to support me you can do that on Patreon (<a href="https://www.patreon.com/RonjaTutorials">patreon.com/RonjaTutorials</a>) or Ko-Fi (<a href="https://ko-fi.com/RonjaTutorials">ko-fi.com/RonjaTutorials</a>).
    </p>
  </div>

  
    <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://ronja-tutorials.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
  
</article>


      <!-- SVG icons from https://iconmonstr.com -->

      <!-- Twitter icon -->
      <span class="my-span-icon">
          <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
          </a>
        </span>

        <!-- RSS icon -->
        
          <span class="my-span-icon">
            <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
            </a>
          </span>
        
        <!-- Contact icon -->
        
        
          <span class="my-span-icon">
            <a href="/about.html" aria-label="Contact" title="Contact ">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
            </a>
          </span>
        
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-124040112-1', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
