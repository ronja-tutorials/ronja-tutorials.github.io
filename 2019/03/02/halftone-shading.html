<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- Non social metatags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="theme-color" content="#157878">

    

    <title>Halftone Shading</title>

    
      <!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">












<!-- Place this data between the <head> tags of your website -->

  <meta name="author" content="Ronja Böhringer">

<meta name="description" content="This tutorial is on another common toon shading technique called halftone shading, unlike normal shading it only uses full lit or full unlit as color..." />





<!-- Schema.org markup for Google+ -->
<meta itemprop="name" content="Halftone Shading">
<meta itemprop="description" content="This tutorial is on another common toon shading technique called halftone shading, unlike normal shading it only uses full lit or full unlit as color...">

  <meta itemprop="image" content="https://www.ronja-tutorials.com/assets/images/posts/040/Result.png">


<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">



<meta name="twitter:title" content="Halftone Shading">
<meta name="twitter:description" content="This tutorial is on another common toon shading technique called halftone shading, unlike normal shading it only uses full lit or full unlit as color...">


  <meta name="twitter:creator" content="@TotallyRonja">


<!-- Twitter summary card with large image must be at least 280x150px -->

  <meta name="twitter:image:src" content="https://www.ronja-tutorials.com/assets/images/posts/040/Result.png">
  <meta property="twitter:image" content="https://www.ronja-tutorials.com/assets/images/posts/040/Result.png">

<meta property="twitter:url" content="https://www.ronja-tutorials.com/2019/03/02/halftone-shading.html">

<!-- Open Graph data -->
<meta property="og:title" content="Halftone Shading" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ronja-tutorials.com/2019/03/02/halftone-shading.html" />

  <meta property="og:image" content="https://www.ronja-tutorials.com/assets/images/posts/040/Result.png" />

<meta property="og:description" content="This tutorial is on another common toon shading technique called halftone shading, unlike normal shading it only uses full lit or full unlit as color..." />
<meta property="og:site_name" content="Ronja's Shader Tutorials" />

  <meta property="article:published_time" content="2019-03-02T00:00:00+01:00" />














  





  




    

    <link rel="canonical" href="https://www.ronja-tutorials.com/2019/03/02/halftone-shading.html">

    

    <!-- <link rel="shortcut icon" href="https://www.ronja-tutorials.com/favicon.ico"> -->
    <meta name="robots" content="noarchive">

    <!-- <link rel="alternate" media="only screen and (max-width: 640px)" href="">
    <link rel="alternate" media="handheld" href=""> -->


    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script async defer data-website-id="fb34d410-ef67-4a3a-8fdc-01a05f5e22b2" src="https://stats.ruby0x1.ca/umami.js" ></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    

    
      <a class="site-title" href="/">Ronja&#39;s Shader Tutorials</a>
    
    <!-- SVG icons from https://iconmonstr.com -->

    <!-- Twitter icon -->
    <span class="my-span-icon">
        <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
          <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
        </a>
      </span>

      <!-- RSS icon -->
      
        <span class="my-span-icon">
          <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
          </a>
        </span>
      
      <!-- Contact icon -->
      
      
        <span class="my-span-icon">
          <a href="/about.html" aria-label="Contact" title="Contact ">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
          </a>
        </span>
      

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
              
              
            
          
            
            
          
            
            
              
                <a class="page-link" href="/about.html">About</a>
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
              
                <a class="page-link" href="/2018/03/20/hlsl-basics.html"></a>
              
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    
    
    

    <section class="page-header">
      <h1 class="project-name">Halftone Shading</h1>
      <h2 class="project-tagline"></h2>
      
      <!-- Post tagline -->
      
        <h2 class="project-date">
        <time datetime="2019-03-02T00:00:00+01:00" itemprop="datePublished">
          
          Mar 2, 2019
        </time>
        
        
          • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ronja Böhringer</span></span>
        
        </h2>
      
      <!-- End: Post tagline -->
    </section>

    <section class="main-content">

      <article itemscope itemtype="http://schema.org/BlogPosting">

  <!-- <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Halftone Shading</h1>
    <p class="post-meta">
      <time datetime="2019-03-02T00:00:00+01:00" itemprop="datePublished">
        
        Mar 2, 2019
      </time>
      </p>
  </header> -->

  
<ul>
  <li><a href="#hard-step-halftone-shading">Hard Step Halftone Shading</a></li>
  <li><a href="#antialiased-halftone-pattern">Antialiased Halftone Pattern</a></li>
  <li><a href="#remapping-comparison-values">Remapping Comparison Values</a></li>
  <li><a href="#source">Source</a></li>
</ul>

  <div itemprop="articleBody">
    <p>This tutorial is on another common toon shading technique called halftone shading, unlike normal shading it only uses full lit or full unlit as colors, but it doesn’t create a hard cut either. Instead it uses a pattern to decide which pixels are lit and which aren’t and the chance of a pixel being lit gets higher the brighter the pixel would be with a normal lighting method. To understand this tutorial I recommend reading and understanding <a href="/2018/06/02/custom-lighting.html">the tutorial about custom lighting methods</a> and <a href="/2019/01/20/screenspace-texture.html">the tutorial about generating screenspace texture coordinates</a>.</p>

<p><img src="/assets/images/posts/040/Result.png" alt="" /></p>

<h2 id="hard-step-halftone-shading">Hard Step Halftone Shading</h2>

<p>For the first simplest implementation we use the result of the <a href="/2018/06/02/custom-lighting.html">custom surface lighting tutorial</a> as the base shader and start to modify that. First we make it simpler by removing the part where the shader reads the value of the toon ramp. Instead we multiply the shadow attenuation earlier with the <code class="language-plaintext highlighter-rouge">towardsLight</code> variable and pass it to the <code class="language-plaintext highlighter-rouge">saturate</code> function to clamp it between 0 and 1. Additionally the light intensity is now only saved as a one-dimensional float since we don’t read from a texture with colors anymore.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/40_DitheredLighting"</span> <span class="p">{</span>
	<span class="c1">//show values to edit in inspector</span>
	<span class="n">Properties</span> <span class="p">{</span>
		<span class="n">_Color</span> <span class="p">(</span><span class="s">"Tint"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
		<span class="p">[</span><span class="n">HDR</span><span class="p">]</span> <span class="n">_Emission</span> <span class="p">(</span><span class="s">"Emission"</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="n">SubShader</span> <span class="p">{</span>
		<span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
		<span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="s">"Queue"</span><span class="o">=</span><span class="s">"Geometry"</span><span class="p">}</span>

		<span class="n">CGPROGRAM</span>

		<span class="c1">//the shader is a surface shader, meaning that it will be extended by unity in the background to have fancy lighting and other features</span>
		<span class="c1">//our surface shader function is called surf and we use our custom lighting model</span>
		<span class="c1">//fullforwardshadows makes sure unity adds the shadow passes the shader might need</span>
		<span class="cp">#pragma surface surf Custom fullforwardshadows
</span>		<span class="cp">#pragma target 3.0
</span>
		<span class="kt">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
		<span class="n">fixed4</span> <span class="n">_Color</span><span class="p">;</span>
		<span class="n">half3</span> <span class="n">_Emission</span><span class="p">;</span>

		<span class="c1">//our lighting function. Will be called once per light</span>
		<span class="n">float4</span> <span class="n">LightingCustom</span><span class="p">(</span><span class="n">SurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="n">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float</span> <span class="n">atten</span><span class="p">){</span>
			<span class="c1">//how much does the normal point towards the light?</span>
			<span class="kt">float</span> <span class="n">towardsLight</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span> <span class="n">lightDir</span><span class="p">);</span>
			<span class="c1">//remap the value from -1 to 1 to between 0 and 1</span>
			<span class="n">towardsLight</span> <span class="o">=</span> <span class="n">towardsLight</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>

			<span class="c1">//combine shadow and light and clamp the result between 0 and 1</span>
			<span class="kt">float</span> <span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="n">atten</span> <span class="o">*</span> <span class="n">towardsLight</span><span class="p">);</span>

			<span class="c1">//combine the color</span>
			<span class="n">float4</span> <span class="n">col</span><span class="p">;</span>
			<span class="c1">//intensity we calculated previously, diffuse color, light falloff and shadowcasting, color of the light</span>
			<span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">lightIntensity</span> <span class="o">*</span> <span class="n">s</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">*</span> <span class="n">_LightColor0</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>
			<span class="c1">//in case we want to make the shader transparent in the future - irrelevant right now</span>
			<span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Alpha</span><span class="p">;</span>

			<span class="k">return</span> <span class="n">col</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">//input struct which is automatically filled by unity</span>
		<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
			<span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
		<span class="p">};</span>

		<span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
		<span class="kt">void</span> <span class="n">surf</span> <span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">SurfaceOutput</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//sample and tint albedo texture</span>
			<span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv_MainTex</span><span class="p">);</span>
			<span class="n">col</span> <span class="o">*=</span> <span class="n">_Color</span><span class="p">;</span>
			<span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>

			<span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">ENDCG</span>
	<span class="p">}</span>
	<span class="n">FallBack</span> <span class="s">"Standard"</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/040/BasicShading.png" alt="" /></p>

<p>With this done, we already have a value that represents how much a given pixel is lit, the next step is to change it from a gradient to a binary one or zero value. To do this we have to compare the value to another value. For this tutorial, we’re getting this other value by sampling a texture via screenspace texture coordinates. You can also use other texture coordinates like the normal UV coordinates, triplanar coordinates or even completely procedural shapes for this that don’t rely on textures at all, but I’ve found screenspace coordinates to be robust and versatile so I’m gonna use them as a example for this tutorial.</p>

<p>In the <a href="/2019/01/20/screenspace-texture.html">tutorial about screenspace coordinates</a> I explain how to get the screenspace coordinates. As soon as we created them, we have to get them from our surface function to our lighting function. For that purpose we have to create a new surface output struct with all of the data we need. This data includes the base color of the shader, the screenspace texture coordinate, the emission of the material, the alpha transparency and the normal. Not all of those values might seem important to us right now, but the alpha and emission variables for example are needed for unity to be able to successfully generate the final shader.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">sampler2D</span> <span class="n">_HalftonePattern</span><span class="p">;</span>
<span class="n">float4</span> <span class="n">_HalftonePattern_ST</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">HalftoneSurfaceOutput</span> <span class="p">{</span>
    <span class="n">fixed3</span> <span class="n">Albedo</span><span class="p">;</span>
    <span class="n">float2</span> <span class="n">ScreenPos</span><span class="p">;</span>
    <span class="n">half3</span> <span class="n">Emission</span><span class="p">;</span>
    <span class="kr">fixed</span> <span class="n">Alpha</span><span class="p">;</span>
    <span class="n">fixed3</span> <span class="n">Normal</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//input struct which is automatically filled by unity</span>
<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
    <span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
    <span class="n">float4</span> <span class="n">screenPos</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
<span class="kt">void</span> <span class="nf">surf</span><span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">HalftoneSurfaceOutput</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//sample and tint albedo texture</span>
    <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv_MainTex</span><span class="p">);</span>
    <span class="n">col</span> <span class="o">*=</span> <span class="n">_Color</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>

    <span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">aspect</span> <span class="o">=</span> <span class="n">_ScreenParams</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">_ScreenParams</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">screenPos</span><span class="p">.</span><span class="n">xy</span> <span class="o">/</span> <span class="n">i</span><span class="p">.</span><span class="n">screenPos</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
    <span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">,</span> <span class="n">_HalftonePattern</span><span class="p">);</span>
    <span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>After transmitting those values to the lighting function we can use them to read from the new texture and write the texture values to the screen. I used a texture with several circular gradients which I generated with shadron, but you can use any tiling gradient (I also use a heart shaped signed distance field in the examples which I generated using <a href="https://assetstore.unity.com/packages/tools/utilities/sdf-toolkit-free-50191">catlikecodings signed distance field generator: https://assetstore.unity.com/packages/tools/utilities/sdf-toolkit-free-50191</a>).</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//our lighting function. Will be called once per light</span>
<span class="n">float4</span> <span class="nf">LightingHalftone</span><span class="p">(</span><span class="n">HalftoneSurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="n">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float</span> <span class="n">atten</span><span class="p">){</span>

    <span class="c1">//get halftone comparison value</span>
    <span class="kt">float</span> <span class="n">halftoneValue</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_HalftonePattern</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">).</span><span class="n">r</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">halftoneValue</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/040/HalftoneCompare.png" alt="" /></p>

<p>Now that we have both the light intensity and the halftone comparison value we can compare them with the step function to get a binary 0 or 1 value based on the pattern of our texture. The first argument of the step function is the halftone value we just sampled from the texture and the second argument is the lightness value. If the lightness is brighter than the halftone texture value, the shader sets to pixel to be fully lit and if it’s less it’s treated as shadowed. The result of the step value is put back into the <code class="language-plaintext highlighter-rouge">lightIntensity</code> value.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//our lighting function. Will be called once per light</span>
<span class="n">float4</span> <span class="nf">LightingHalftone</span><span class="p">(</span><span class="n">HalftoneSurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="n">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float</span> <span class="n">atten</span><span class="p">){</span>
    <span class="c1">//how much does the normal point towards the light?</span>
    <span class="kt">float</span> <span class="n">towardsLight</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span> <span class="n">lightDir</span><span class="p">);</span>
    <span class="c1">//remap the value from -1 to 1 to between 0 and 1</span>
    <span class="n">towardsLight</span> <span class="o">=</span> <span class="n">towardsLight</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>

    <span class="c1">//combine shadow and light and clamp the result between 0 and 1 to get light intensity</span>
    <span class="kt">float</span> <span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="n">atten</span> <span class="o">*</span> <span class="n">towardsLight</span><span class="p">);</span>

    <span class="c1">//get halftone comparison value</span>
    <span class="kt">float</span> <span class="n">halftoneValue</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_HalftonePattern</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">).</span><span class="n">r</span><span class="p">;</span>

    <span class="c1">//make lightness binary between hully lit and fully shadow based on halftone pattern.</span>
    <span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">step</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">,</span> <span class="n">lightIntensity</span><span class="p">);</span>

    <span class="c1">//combine the color</span>
    <span class="n">float4</span> <span class="n">col</span><span class="p">;</span>
    <span class="c1">//intensity we calculated previously, diffuse color, light falloff and shadowcasting, color of the light</span>
    <span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">lightIntensity</span> <span class="o">*</span> <span class="n">s</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">*</span> <span class="n">_LightColor0</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>
    <span class="c1">//in case we want to make the shader transparent in the future - irrelevant right now</span>
    <span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Alpha</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/040/SimpleHalftone.png" alt="" /></p>

<h2 id="antialiased-halftone-pattern">Antialiased Halftone Pattern</h2>

<p>This works well, but we’re not actually limited by binary colors in our shaders. That means we can preserve the appearance of the halftone binary values while still using greyscale values between them to make the result look less choppy. For this we replace our <code class="language-plaintext highlighter-rouge">step</code> function with a <code class="language-plaintext highlighter-rouge">smoothstep</code> function and interpolate the colors over a single pixel. The first task is to figure out how much the value we compare to changes over a single pixel. Luckily shaders provide us with the <code class="language-plaintext highlighter-rouge">fwidth</code> function which returns a approximation of exactly that value. We divide the value of a halftone by two and then do the smoothstep from the comparison value minus half of the change where the result will be zero to the comparison value plus half of the change where the result will be one. The value we use to step between those values is the light intensity, just like previously.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//make lightness binary between fully lit and fully shadow based on halftone pattern (with a bit of antialiasing between)</span>
<span class="kt">float</span> <span class="n">halftoneChange</span> <span class="o">=</span> <span class="n">fwidth</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
<span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">smoothstep</span><span class="p">(</span><span class="n">halftoneValue</span> <span class="o">-</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">halftoneValue</span> <span class="o">+</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">lightIntensity</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/040/AntiAliasing.png" alt="" /></p>

<h2 id="remapping-comparison-values">Remapping Comparison Values</h2>

<p>If we want to change how much of the shading is shadowed and how much is illuminated we can change our texture, but this is a slow and indirect process. For quick prototyping we can also remap the values of the texture via a few uniform variables we can expose. In image manipulation programs, this process is often referred to as adjusting levels. We’re going to write a external function for this which will take the halftone comparison value as a argument as well as the input minimum value, the input maximum value, the output minimum value and the output maximum value. Apart from the first value all additional arguments are new properties we add to the shader. The minimum and maximum values don’t mean that we’re not allowed to pass values to the function that are outside of those ranges, it merely means that for input value that is the same value as the minimum input value the function will generate a output value that’s equal to the minimum output value and similarly for the maxmimum values. Values that are not those fixed values are interpolated linearly, so a input value thats exactly in the middle between the min and max input values leads to a output value thats exactly between the output minimum and maximum values.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_RemapInputMin</span> <span class="p">(</span><span class="s">"Remap input min value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_RemapInputMax</span> <span class="p">(</span><span class="s">"Remap input max value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">_RemapOutputMin</span> <span class="p">(</span><span class="s">"Remap output min value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_RemapOutputMax</span> <span class="p">(</span><span class="s">"Remap output max value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="n">_RemapInputMin</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">_RemapInputMax</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">_RemapOutputMin</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">_RemapOutputMax</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//make lightness binary between fully lit and fully shadow based on halftone pattern (with a bit of antialiasing between)</span>
<span class="n">halftoneValue</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">,</span> <span class="n">_RemapInputMin</span><span class="p">,</span> <span class="n">_RemapInputMax</span><span class="p">,</span> <span class="n">_RemapOutputMin</span><span class="p">,</span> <span class="n">_RemapOutputMax</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">halftoneChange</span> <span class="o">=</span> <span class="n">fwidth</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
<span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">smoothstep</span><span class="p">(</span><span class="n">halftoneValue</span> <span class="o">-</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">halftoneValue</span> <span class="o">+</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">lightIntensity</span><span class="p">);</span>
</code></pre></div></div>

<p>Then we write the remapping function. The function consists of two parts, first we get the relative position of the input value by first subtracting the input minimum to make the value based on zero and then we divide it by the range of the input values which we can calculate by subtracting the minimum from the maximum. This relative value will be between 0 and 1 if the input value is between the minumum and maximum values, but is also able to represent values outside of that range. With this value we can then do a linear interpolation from the output minimum to the output maximum values and return the result of that.</p>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="nf">map</span><span class="p">(</span><span class="kt">float</span> <span class="kr">input</span><span class="p">,</span> <span class="kt">float</span> <span class="n">inMin</span><span class="p">,</span> <span class="kt">float</span> <span class="n">inMax</span><span class="p">,</span> <span class="kt">float</span> <span class="n">outMin</span><span class="p">,</span>  <span class="kt">float</span> <span class="n">outMax</span><span class="p">){</span>
    <span class="kt">float</span> <span class="n">relativeValue</span> <span class="o">=</span> <span class="p">(</span><span class="kr">input</span> <span class="o">-</span> <span class="n">inMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">inMax</span> <span class="o">-</span> <span class="n">inMin</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">lerp</span><span class="p">(</span><span class="n">outMin</span><span class="p">,</span> <span class="n">outMax</span><span class="p">,</span> <span class="n">relativeValue</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/posts/040/Remap.gif" alt="" /></p>

<p>This now allows us to change which parts are counted as shadowed and which are lit in a quick and dynamic manner.</p>

<h2 id="source">Source</h2>

<ul>
  <li><a href="https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/040_Halftone_Lighting/HalftoneShading.shader">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/040_Halftone_Lighting/HalftoneShading.shader</a></li>
</ul>

<div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Shader</span> <span class="s">"Tutorial/40_DitheredLighting"</span> <span class="p">{</span>
	<span class="c1">//show values to edit in inspector</span>
	<span class="n">Properties</span><span class="p">{</span>
		<span class="n">_Color</span><span class="p">(</span><span class="s">"Tint"</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">_MainTex</span><span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
		<span class="p">[</span><span class="n">HDR</span><span class="p">]</span> <span class="n">_Emission</span><span class="p">(</span><span class="s">"Emission"</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">_HalftonePattern</span><span class="p">(</span><span class="s">"Halftone Pattern"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>

        <span class="n">_RemapInputMin</span> <span class="p">(</span><span class="s">"Remap input min value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_RemapInputMax</span> <span class="p">(</span><span class="s">"Remap input max value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">_RemapOutputMin</span> <span class="p">(</span><span class="s">"Remap output min value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_RemapOutputMax</span> <span class="p">(</span><span class="s">"Remap output max value"</span><span class="p">,</span> <span class="n">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">=</span> <span class="mi">1</span>
	<span class="p">}</span>
		<span class="n">SubShader</span><span class="p">{</span>
		<span class="c1">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry</span>
		<span class="n">Tags</span><span class="p">{</span> <span class="s">"RenderType"</span> <span class="o">=</span> <span class="s">"Opaque"</span> <span class="s">"Queue"</span> <span class="o">=</span> <span class="s">"Geometry"</span><span class="p">}</span>

		<span class="n">CGPROGRAM</span>

		<span class="c1">//the shader is a surface shader, meaning that it will be extended by unity in the background to have fancy lighting and other features</span>
		<span class="c1">//our surface shader function is called surf and we use our custom lighting model</span>
		<span class="c1">//fullforwardshadows makes sure unity adds the shadow passes the shader might need</span>
		<span class="cp">#pragma surface surf Halftone fullforwardshadows
</span>		<span class="cp">#pragma target 3.0
</span>
        <span class="c1">//basic properties</span>
		<span class="kt">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
		<span class="n">fixed4</span> <span class="n">_Color</span><span class="p">;</span>
		<span class="n">half3</span> <span class="n">_Emission</span><span class="p">;</span>

        <span class="c1">//shading properties</span>
		<span class="kt">sampler2D</span> <span class="n">_HalftonePattern</span><span class="p">;</span>
		<span class="n">float4</span> <span class="n">_HalftonePattern_ST</span><span class="p">;</span>

        <span class="c1">///remapping values</span>
        <span class="kt">float</span> <span class="n">_RemapInputMin</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">_RemapInputMax</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">_RemapOutputMin</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">_RemapOutputMax</span><span class="p">;</span>

        <span class="c1">//struct that holds information that gets transferred from surface to lighting function</span>
		<span class="k">struct</span> <span class="n">HalftoneSurfaceOutput</span> <span class="p">{</span>
			<span class="n">fixed3</span> <span class="n">Albedo</span><span class="p">;</span>
			<span class="n">float2</span> <span class="n">ScreenPos</span><span class="p">;</span>
			<span class="n">half3</span> <span class="n">Emission</span><span class="p">;</span>
			<span class="kr">fixed</span> <span class="n">Alpha</span><span class="p">;</span>
			<span class="n">fixed3</span> <span class="n">Normal</span><span class="p">;</span>
		<span class="p">};</span>

        <span class="c1">// This function remaps values from a input to a output range</span>
        <span class="kt">float</span> <span class="n">map</span><span class="p">(</span><span class="kt">float</span> <span class="kr">input</span><span class="p">,</span> <span class="kt">float</span> <span class="n">inMin</span><span class="p">,</span> <span class="kt">float</span> <span class="n">inMax</span><span class="p">,</span> <span class="kt">float</span> <span class="n">outMin</span><span class="p">,</span>  <span class="kt">float</span> <span class="n">outMax</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//inverse lerp with input range</span>
            <span class="kt">float</span> <span class="n">relativeValue</span> <span class="o">=</span> <span class="p">(</span><span class="kr">input</span> <span class="o">-</span> <span class="n">inMin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">inMax</span> <span class="o">-</span> <span class="n">inMin</span><span class="p">);</span>
            <span class="c1">//lerp with output range</span>
            <span class="k">return</span> <span class="n">lerp</span><span class="p">(</span><span class="n">outMin</span><span class="p">,</span> <span class="n">outMax</span><span class="p">,</span> <span class="n">relativeValue</span><span class="p">);</span>
        <span class="p">}</span>

		<span class="c1">//our lighting function. Will be called once per light</span>
		<span class="n">float4</span> <span class="n">LightingHalftone</span><span class="p">(</span><span class="n">HalftoneSurfaceOutput</span> <span class="n">s</span><span class="p">,</span> <span class="n">float3</span> <span class="n">lightDir</span><span class="p">,</span> <span class="kt">float</span> <span class="n">atten</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//how much does the normal point towards the light?</span>
			<span class="kt">float</span> <span class="n">towardsLight</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span> <span class="n">lightDir</span><span class="p">);</span>
			<span class="c1">//remap the value from -1 to 1 to between 0 and 1</span>
			<span class="n">towardsLight</span> <span class="o">=</span> <span class="n">towardsLight</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
			<span class="c1">//combine shadow and light and clamp the result between 0 and 1</span>
			<span class="kt">float</span> <span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">saturate</span><span class="p">(</span><span class="n">towardsLight</span> <span class="o">*</span> <span class="n">atten</span><span class="p">).</span><span class="n">r</span><span class="p">;</span>

			<span class="c1">//get halftone comparison value</span>
            <span class="kt">float</span> <span class="n">halftoneValue</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_HalftonePattern</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">).</span><span class="n">r</span><span class="p">;</span>

            <span class="c1">//make lightness binary between fully lit and fully shadow based on halftone pattern (with a bit of antialiasing between)</span>
            <span class="n">halftoneValue</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">,</span> <span class="n">_RemapInputMin</span><span class="p">,</span> <span class="n">_RemapInputMax</span><span class="p">,</span> <span class="n">_RemapOutputMin</span><span class="p">,</span> <span class="n">_RemapOutputMax</span><span class="p">);</span>
            <span class="kt">float</span> <span class="n">halftoneChange</span> <span class="o">=</span> <span class="n">fwidth</span><span class="p">(</span><span class="n">halftoneValue</span><span class="p">)</span> <span class="o">*</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
			<span class="n">lightIntensity</span> <span class="o">=</span> <span class="n">smoothstep</span><span class="p">(</span><span class="n">halftoneValue</span> <span class="o">-</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">halftoneValue</span> <span class="o">+</span> <span class="n">halftoneChange</span><span class="p">,</span> <span class="n">lightIntensity</span><span class="p">);</span>

			<span class="c1">//combine the color</span>
			<span class="n">float4</span> <span class="n">col</span><span class="p">;</span>
			<span class="c1">//intensity we calculated previously, diffuse color, light falloff and shadowcasting, color of the light</span>
			<span class="n">col</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">lightIntensity</span> <span class="o">*</span> <span class="n">s</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">*</span> <span class="n">_LightColor0</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>
			<span class="c1">//in case we want to make the shader transparent in the future - irrelevant right now</span>
			<span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">Alpha</span><span class="p">;</span>

			<span class="k">return</span> <span class="n">col</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="c1">//input struct which is automatically filled by unity</span>
		<span class="k">struct</span> <span class="n">Input</span> <span class="p">{</span>
			<span class="n">float2</span> <span class="n">uv_MainTex</span><span class="p">;</span>
			<span class="n">float4</span> <span class="n">screenPos</span><span class="p">;</span>
		<span class="p">};</span>

		<span class="c1">//the surface shader function which sets parameters the lighting function then uses</span>
		<span class="kt">void</span> <span class="n">surf</span><span class="p">(</span><span class="n">Input</span> <span class="n">i</span><span class="p">,</span> <span class="k">inout</span> <span class="n">HalftoneSurfaceOutput</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">//set surface colors</span>
			<span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv_MainTex</span><span class="p">);</span>
			<span class="n">col</span> <span class="o">*=</span> <span class="n">_Color</span><span class="p">;</span>
			<span class="n">o</span><span class="p">.</span><span class="n">Albedo</span> <span class="o">=</span> <span class="n">col</span><span class="p">.</span><span class="n">rgb</span><span class="p">;</span>

			<span class="n">o</span><span class="p">.</span><span class="n">Emission</span> <span class="o">=</span> <span class="n">_Emission</span><span class="p">;</span>

            <span class="c1">//setup screenspace UVs for lighing function</span>
			<span class="kt">float</span> <span class="n">aspect</span> <span class="o">=</span> <span class="n">_ScreenParams</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">_ScreenParams</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
			<span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">screenPos</span><span class="p">.</span><span class="n">xy</span> <span class="o">/</span> <span class="n">i</span><span class="p">.</span><span class="n">screenPos</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
			<span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">,</span> <span class="n">_HalftonePattern</span><span class="p">);</span>
			<span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">ScreenPos</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">aspect</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">ENDCG</span>
	<span class="p">}</span>
		<span class="n">FallBack</span> <span class="s">"Standard"</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As always thank you so much for reading and supporting me, your messages of support mean the world to me 💖.</p>


    <p>
        You can also find me on twitter at <a href="https://www.twitter.com/totallyRonja">@totallyRonja</a>. If you liked my tutorial and want to support me you can do that on Patreon (<a href="https://www.patreon.com/RonjaTutorials">patreon.com/RonjaTutorials</a>) or Ko-Fi (<a href="https://ko-fi.com/RonjaTutorials">ko-fi.com/RonjaTutorials</a>).
    </p>
  </div>

  
    <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://ronja-tutorials.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
  
</article>


      <!-- SVG icons from https://iconmonstr.com -->

      <!-- Twitter icon -->
      <span class="my-span-icon">
          <a href="https://twitter.com/TotallyRonja" aria-label="'s Twitter" title="'s Twitter">
            <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" style="margin-top: 12px;margin-left: 13px;"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
          </a>
        </span>

        <!-- RSS icon -->
        
          <span class="my-span-icon">
            <a href="/feed.xml" aria-label="RSS feed" title="'s RSS feed">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-3.374 17c-.897 0-1.626-.727-1.626-1.624s.729-1.624 1.626-1.624 1.626.727 1.626 1.624-.729 1.624-1.626 1.624zm3.885 0c-.03-3.022-2.485-5.474-5.511-5.504v-2.406c4.361.03 7.889 3.555 7.92 7.91h-2.409zm4.081 0c-.016-5.297-4.303-9.571-9.592-9.594v-2.406c6.623.023 11.985 5.384 12 12h-2.408z"/></svg>
            </a>
          </span>
        
        <!-- Contact icon -->
        
        
          <span class="my-span-icon">
            <a href="/about.html" aria-label="Contact" title="Contact ">
              <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
            </a>
          </span>
        
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-124040112-1', 'auto');
        ga('send', 'pageview');
      </script>
    
  </body>
</html>
